generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Order {
  id        Int      @id @default(autoincrement())
  items     String   // Storing items as JSON string for SQLite compatibility
  total     Float
  status    String   @default("PENDING") // PENDING, COMPLETED, CANCELLED
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  Token     Token?
}

model Token {
  id        Int      @id @default(autoincrement())
  number    String   // The display token (e.g., "A-12")
  status    String   @default("PENDING") // PENDING (In Queue), SERVING (Now Serving), COMPLETED, CANCELLED
  orderId   Int      @unique
  order     Order    @relation(fields: [orderId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model MenuItem {
  id        Int      @id @default(autoincrement())
  name      String
  price     Float
  category  String   @default("General")
  available Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model TokenSequence {
  id             Int      @id @default(autoincrement())
  date           String   @unique // Format: YYYY-MM-DD
  currentSequence Int     @default(0)
  updatedAt      DateTime @updatedAt
}
